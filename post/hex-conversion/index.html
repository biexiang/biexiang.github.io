<!DOCTYPE html>
<html>
<head>
    <title>进制转换 // Peculiar</title>

        <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">
        <meta property="og:title" content="进制转换" />
    <meta property="og:description" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:url" content="https://biexiang.github.io/post/hex-conversion/" />
    

    <link href="" rel="alternate" type="application/rss+xml" title="Peculiar" />
    <link rel="shortcut icon" href="/favicon.png">

    <link href="https://biexiang.github.io/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
    <link href="https://biexiang.github.io/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="https://biexiang.github.io/css/style.css">

    <link href="http://gmpg.org/xfn/11" rel="profile">
    
    <meta name="generator" content="Hugo 0.24.1" />
</head>


<body>
<div id="container">
    <header id="header">
    <div id="header-outer" class="outer">
        <div id="header-inner" class="inner">
            <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
            <a id="logo" class="logo-text" href="https://biexiang.github.io/">Peculiar</a>
            <nav id="main-nav">
                
                <a class="main-nav-link" href="/archives">Archives</a>
                
                <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            <nav id="sub-nav">
                <div id="search-form-wrap">
                </div>
            </nav>
        </div>
    </div>
</header>
    <section id="main" class="outer">
        <article class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        <header class="article-header">
            <h1 class="article-title" itemprop="name">进制转换</h1>
        </header>
        
        <div class="article-meta">
            <a href="/post/hex-conversion/" class="article-date">
                <time datetime='2017-11-03T18:42:32.000&#43;08:00' itemprop="datePublished">2017-11-03</time>
            </a>
            
            
            
        </div>
        <div class="article-entry" itemprop="articleBody">
            <p>如果做短链接服务，或者想要像Youtube那样隐藏主键ID，就可以使用进制转换来实现。</p>

<p></p>

<h2 id="itoa和atoi">Itoa和Atoi</h2>

<ul>
<li>Itoa：数字转为字符,会涉及到正负数和溢出问题。<br /></li>
<li>Atoi：字符转为数字<br /></li>
</ul>

<h2 id="转换代码">转换代码</h2>

<pre><code>    package main

    import (
        &quot;fmt&quot;
        &quot;math&quot;
        &quot;strconv&quot;
    )

    var kv map[int]string = map[int]string{
        0:  &quot;0&quot;,
        1:  &quot;1&quot;,
        2:  &quot;2&quot;,
        3:  &quot;3&quot;,
        4:  &quot;4&quot;,
        5:  &quot;5&quot;,
        6:  &quot;6&quot;,
        7:  &quot;7&quot;,
        8:  &quot;8&quot;,
        9:  &quot;9&quot;,
        10: &quot;a&quot;,
        11: &quot;b&quot;,
        12: &quot;c&quot;,
        13: &quot;d&quot;,
        14: &quot;e&quot;,
        15: &quot;f&quot;,
        16: &quot;g&quot;,
        17: &quot;h&quot;,
        18: &quot;i&quot;,
        19: &quot;j&quot;,
        20: &quot;k&quot;,
        21: &quot;l&quot;,
        22: &quot;m&quot;,
        23: &quot;n&quot;,
        24: &quot;o&quot;,
        25: &quot;p&quot;,
        26: &quot;q&quot;,
        27: &quot;r&quot;,
        28: &quot;s&quot;,
        29: &quot;t&quot;,
        30: &quot;u&quot;,
        31: &quot;v&quot;,
        32: &quot;w&quot;,
        33: &quot;x&quot;,
        34: &quot;y&quot;,
        35: &quot;z&quot;,
        36: &quot;A&quot;,
        37: &quot;B&quot;,
        38: &quot;C&quot;,
        39: &quot;D&quot;,
        40: &quot;E&quot;,
        41: &quot;F&quot;,
        42: &quot;G&quot;,
        43: &quot;H&quot;,
        44: &quot;I&quot;,
        45: &quot;J&quot;,
        46: &quot;K&quot;,
        47: &quot;L&quot;,
        48: &quot;M&quot;,
        49: &quot;N&quot;,
        50: &quot;O&quot;,
        51: &quot;P&quot;,
        52: &quot;Q&quot;,
        53: &quot;R&quot;,
        54: &quot;S&quot;,
        55: &quot;T&quot;,
        56: &quot;U&quot;,
        57: &quot;V&quot;,
        58: &quot;W&quot;,
        59: &quot;X&quot;,
        60: &quot;Y&quot;,
        61: &quot;Z&quot;,
    }

    //10进制转为任何进制
    func Iencoding(dec, to int) string {
        if to &gt; 61 || to &lt; 1 {
            return &quot;&quot;
        }
        var result string
        var remain int
        for dec != 0 {
            remain = dec % to
            if remain &gt; 9 &amp;&amp; remain &lt; 62 {
                result = kv[remain] + result
            } else {
                //转换超出62进制或者小于10，直接implode
                result = strconv.Itoa(remain) + result
            }

            dec = dec / to
        }
        return result
    }

    func getIndex(word string) int {
        var result int = -1
        for k, v := range kv {
            if v == word {
                result = k
                break
            }
        }

        if result == -1 {
            result, _ = strconv.Atoi(word)
        }
        return result
    }

    //任何进制转为10进制
    func Idecoding(enstr string, hex int) float64 {
        var result float64 = 0.0
        size := len(enstr)
        for i := 0; i &lt; size; i++ {
            key := getIndex(string(enstr[size-i-1]))
            result += float64(key) * math.Pow(float64(hex), float64(i))
        }
        return result
    }

    func main() {
        tst := Iencoding(4096, 25)
        fmt.Println(tst)
        fmt.Println(Idecoding(tst, 25))
    }
</code></pre>
        </div>

        
        
        <div class="article-toc" style="display:none;">
            <h3>Contents</h3>
            <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#itoa和atoi">Itoa和Atoi</a></li>
<li><a href="#转换代码">转换代码</a></li>
</ul></li>
</ul>
</nav>
        </div>
        
        

        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.slim.min.js" integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc=" crossorigin="anonymous"></script>
        <script>
            (function() {
                var $toc = $('#TableOfContents');
                if ($toc.length > 0) {
                    var $window = $(window);

                    function onScroll(){
                        var currentScroll = $window.scrollTop();
                        var h = $('.article-entry h1, .article-entry h2, .article-entry h3, .article-entry h4, .article-entry h5, .article-entry h6');
                        var id = "";
                        h.each(function (i, e) {
                            e = $(e);
                            if (e.offset().top - 10 <= currentScroll) {
                                id = e.attr('id');
                            }
                        });
                        var active = $toc.find('a.active');
                        if (active.length == 1 && active.eq(0).attr('href') == '#' + id) return true;

                        active.each(function (i, e) {
                            $(e).removeClass('active').siblings('ul').hide();
                        });
                        $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
                            $(e).children('a').addClass('active').siblings('ul').show();
                        });
                    }

                    $window.on('scroll', onScroll);
                    $(document).ready(function() {
                        $toc.find('a').parent('li').find('ul').hide();
                        onScroll();
                        document.getElementsByClassName('article-toc')[0].style.display = '';
                    });
                }
            })();
        </script>
        


        
        <footer class="article-footer">
            <ul class="article-tag-list">
                
                <li class="article-tag-list-item">
                    <a class="article-tag-list-link" href="https://biexiang.github.io//tags/%E7%AE%97%E6%B3%95">算法
                    </a>
                </li>
                
            </ul>
        </footer>
        
    </div>
    <nav id="article-nav">
    
    <a href="/post/redis-related/" id="article-nav-newer" class="article-nav-link-wrap">
        <div class="article-nav-title"><span>&lt;</span>&nbsp;
            Redis设计与实现-笔记
        </div>
    </a>
    
    
    <a href="/post/video_clip/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">视频剪辑&nbsp;<span>&gt;</span></div>
    </a>
    
</nav>
</article>

        
    </section>
    <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 map[email:noreply#qq.com name:Poly]&nbsp;
            Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with theme <a href="https://github.com/carsonip/hugo-theme-minos">Minos</a>
        </div>
    </div>
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/tomorrow-night.min.css" integrity="sha256-2wL88NKUqvJi/ExflDzkzUumjUM73mcK2gBvBBeLvTk=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha256-ExtbCSBuYA7kq1Pz362ibde9nnsHYPt6JxuxYeZbU+c=" crossorigin="anonymous"></script>
        <script>renderMathInElement(document.body);</script>
    
    <script>
        document.getElementById('main-nav-toggle').addEventListener('click', function () {
            var header = document.getElementById('header');
            if (header.classList.contains('mobile-on')) {
                header.classList.remove('mobile-on');
            } else {
                header.classList.add('mobile-on');
            }
        });
    </script>
</footer>
</div>
</body>
</html>
